{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\DatingWeb\\\\dating-web-main\\\\client\\\\src\\\\components\\\\ChatDisplay.js\",\n  _s = $RefreshSig$();\nimport Chat from './Chat';\nimport ChatInput from './ChatInput';\nimport axios from 'axios';\nimport { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ChatDisplay = ({\n  user,\n  clickedUser\n}) => {\n  _s();\n  const userId = user === null || user === void 0 ? void 0 : user.user_id;\n  const clickedUserId = clickedUser === null || clickedUser === void 0 ? void 0 : clickedUser.user_id;\n  const [usersMessages, setUsersMessages] = useState(null);\n  const [clickedUsersMessages, setClickedUsersMessages] = useState(null);\n  const getUsersMessages = async () => {\n    try {\n      const response = await axios.get('http://localhost:8000/messages', {\n        params: {\n          userId: userId,\n          correspondingUserId: clickedUserId\n        }\n      });\n      setUsersMessages(response.data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const getClickedUsersMessages = async () => {\n    try {\n      const response = await axios.get('http://localhost:8000/messages', {\n        params: {\n          userId: clickedUserId,\n          correspondingUserId: userId\n        }\n      });\n      setClickedUsersMessages(response.data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  useEffect(() => {\n    const fetchMessages = async () => {\n      try {\n        const userResponse = await axios.get('http://localhost:8000/messages', {\n          params: {\n            userId: user.user_id,\n            correspondingUserId: clickedUser.user_id\n          }\n        });\n        setUsersMessages(userResponse.data);\n        const clickedUserResponse = await axios.get('http://localhost:8000/messages', {\n          params: {\n            userId: clickedUser.user_id,\n            correspondingUserId: user.user_id\n          }\n        });\n        setClickedUsersMessages(clickedUserResponse.data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    fetchMessages();\n  }, [user, clickedUser]);\n  const formatMessages = (messages, currentUser, otherUser) => {\n    return messages.map(message => ({\n      name: message.userId === currentUser.user_id ? currentUser.first_name : otherUser.first_name,\n      img: message.userId === currentUser.user_id ? currentUser.url : otherUser.url,\n      message: message.message,\n      timestamp: message.timestamp\n    }));\n  };\n  const userFormattedMessages = formatMessages(usersMessages, user, clickedUser);\n  const clickedUserFormattedMessages = formatMessages(clickedUsersMessages, clickedUser, user);\n  const combinedMessages = userFormattedMessages.concat(clickedUserFormattedMessages).sort((a, b) => a.timestamp.localeCompare(b.timestamp));\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Chat, {\n      descendingOrderMessages: combinedMessages\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ChatInput, {\n      user: user,\n      clickedUser: clickedUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(ChatDisplay, \"2NEB42wPVsAhSx/Wnejt8YtyMTY=\");\n_c = ChatDisplay;\nexport default ChatDisplay;\nvar _c;\n$RefreshReg$(_c, \"ChatDisplay\");","map":{"version":3,"names":["Chat","ChatInput","axios","useState","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","ChatDisplay","user","clickedUser","_s","userId","user_id","clickedUserId","usersMessages","setUsersMessages","clickedUsersMessages","setClickedUsersMessages","getUsersMessages","response","get","params","correspondingUserId","data","error","console","log","getClickedUsersMessages","fetchMessages","userResponse","clickedUserResponse","formatMessages","messages","currentUser","otherUser","map","message","name","first_name","img","url","timestamp","userFormattedMessages","clickedUserFormattedMessages","combinedMessages","concat","sort","a","b","localeCompare","children","descendingOrderMessages","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/DatingWeb/dating-web-main/client/src/components/ChatDisplay.js"],"sourcesContent":["import Chat from './Chat'\nimport ChatInput from './ChatInput'\nimport axios from 'axios'\nimport {useState, useEffect} from \"react\"\n\n\nconst ChatDisplay = ({ user , clickedUser }) => {\n    const userId = user?.user_id\n    const clickedUserId = clickedUser?.user_id\n    const [usersMessages, setUsersMessages] = useState(null)\n    const [clickedUsersMessages, setClickedUsersMessages] = useState(null)\n\n    const getUsersMessages = async () => {\n     try {\n            const response = await axios.get('http://localhost:8000/messages', {\n                params: { userId: userId, correspondingUserId: clickedUserId}\n            })\n         setUsersMessages(response.data)\n        } catch (error) {\n         console.log(error)\n     }\n    }\n\n    const getClickedUsersMessages = async () => {\n        try {\n            const response = await axios.get('http://localhost:8000/messages', {\n                params: { userId: clickedUserId , correspondingUserId: userId}\n            })\n            setClickedUsersMessages(response.data)\n        } catch (error) {\n            console.log(error)\n        }\n    }\n\n    useEffect(() => {\n        const fetchMessages = async () => {\n            try {\n                const userResponse = await axios.get('http://localhost:8000/messages', {\n                    params: { userId: user.user_id, correspondingUserId: clickedUser.user_id }\n                });\n                setUsersMessages(userResponse.data);\n\n                const clickedUserResponse = await axios.get('http://localhost:8000/messages', {\n                    params: { userId: clickedUser.user_id, correspondingUserId: user.user_id }\n                });\n                setClickedUsersMessages(clickedUserResponse.data);\n            } catch (error) {\n                console.log(error);\n            }\n        };\n\n        fetchMessages();\n    }, [user, clickedUser]);\n\n    const formatMessages = (messages, currentUser, otherUser) => {\n        return messages.map(message => ({\n            name: message.userId === currentUser.user_id ? currentUser.first_name : otherUser.first_name,\n            img: message.userId === currentUser.user_id ? currentUser.url : otherUser.url,\n            message: message.message,\n            timestamp: message.timestamp\n        }));\n    };\n\n    const userFormattedMessages = formatMessages(usersMessages, user, clickedUser);\n    const clickedUserFormattedMessages = formatMessages(clickedUsersMessages, clickedUser, user);\n\n    const combinedMessages = userFormattedMessages.concat(clickedUserFormattedMessages).sort((a, b) => a.timestamp.localeCompare(b.timestamp));\n\n    return (\n        <>\n            <Chat descendingOrderMessages={combinedMessages} />\n            <ChatInput user={user} clickedUser={clickedUser} />\n        </>\n    );\n};\n\nexport default ChatDisplay;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}